import { getIronSession, IronSessionOptions } from 'iron-session'; import { cookies } from 'next/headers'; export type SessionData={user?:{id:number;email:string;name?:string}}; const opts:IronSessionOptions={cookieName:process.env.COOKIE_NAME||'ledgerpro_session',password:process.env.COOKIE_PASSWORD||'dev-change-me-please-12345678901234567890',cookieOptions:{secure:(process.env.COOKIE_SECURE||'false')==='true',sameSite:'lax'}}; export async function getSession(){ return getIronSession<SessionData>(await cookies(),opts); }
